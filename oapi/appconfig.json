{
  "title": "FlyAppConfig",
  "definitions": {
    "ApiDuration": {
      "type": "object"
    },
    "ApiHTTPOptions": {
      "properties": {
        "compress": {
          "type": [
            "null",
            "boolean"
          ]
        },
        "h2_backend": {
          "type": [
            "null",
            "boolean"
          ]
        },
        "response": {
          "$ref": "#/definitions/ApiHTTPResponseOptions"
        }
      },
      "type": "object"
    },
    "ApiHTTPResponseOptions": {
      "properties": {
        "headers": {
          "additionalProperties": {},
          "type": "object"
        }
      },
      "type": "object"
    },
    "ApiMachineGuest": {
      "properties": {
        "cpu_kind": {
          "type": "string"
        },
        "cpus": {
          "type": "integer"
        },
        "gpu_kind": {
          "type": "string"
        },
        "host_dedication_id": {
          "type": "string"
        },
        "kernel_args": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "memory_mb": {
          "type": "integer"
        }
      },
      "type": "object"
    },
    "ApiMachinePort": {
      "properties": {
        "end_port": {
          "type": [
            "null",
            "integer"
          ]
        },
        "force_https": {
          "type": "boolean"
        },
        "handlers": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "http_options": {
          "$ref": "#/definitions/ApiHTTPOptions"
        },
        "port": {
          "type": [
            "null",
            "integer"
          ]
        },
        "proxy_proto_options": {
          "$ref": "#/definitions/ApiProxyProtoOptions"
        },
        "start_port": {
          "type": [
            "null",
            "integer"
          ]
        },
        "tls_options": {
          "$ref": "#/definitions/ApiTLSOptions"
        }
      },
      "type": "object"
    },
    "ApiMachineServiceConcurrency": {
      "properties": {
        "hard_limit": {
          "type": "integer"
        },
        "soft_limit": {
          "type": "integer"
        },
        "type": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "ApiProxyProtoOptions": {
      "properties": {
        "version": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "ApiTLSOptions": {
      "properties": {
        "alpn": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "default_self_signed": {
          "type": [
            "null",
            "boolean"
          ]
        },
        "versions": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "AppconfigBuild": {
      "properties": {
        "args": {
          "additionalProperties": {
            "type": "string"
          },
          "type": "object"
        },
        "build-target": {
          "type": "string"
        },
        "builder": {
          "type": "string"
        },
        "buildpacks": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "builtin": {
          "type": "string"
        },
        "dockerfile": {
          "type": "string"
        },
        "ignorefile": {
          "type": "string"
        },
        "image": {
          "type": "string"
        },
        "settings": {
          "additionalProperties": {},
          "type": "object"
        }
      },
      "type": "object"
    },
    "AppconfigCompute": {
      "properties": {
        "MachineGuest": {
          "$ref": "#/definitions/ApiMachineGuest"
        },
        "memory": {
          "type": "string"
        },
        "processes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "size": {
          "enum": [
            "shared-cpu-1x",
            "shared-cpu-2x",
            "shared-cpu-4x",
            "shared-cpu-8x",
            "performance-1x",
            "performance-2x",
            "performance-4x",
            "performance-8x",
            "performance-16x",
            "a100-40gb",
            "a100-80gb",
            "l40s"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "AppconfigDeploy": {
      "properties": {
        "max_unavailable": {
          "type": [
            "null",
            "number"
          ]
        },
        "release_command": {
          "type": "string"
        },
        "release_command_timeout": {
          "$ref": "#/definitions/ApiDuration"
        },
        "strategy": {
          "enum": [
            "canary",
            "rolling",
            "bluegreen",
            "immediate"
          ],
          "type": "string"
        },
        "wait_timeout": {
          "$ref": "#/definitions/ApiDuration"
        }
      },
      "type": "object"
    },
    "AppconfigExperimental": {
      "properties": {
        "auto_rollback": {
          "type": "boolean"
        },
        "cmd": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "enable_consul": {
          "type": "boolean"
        },
        "enable_etcd": {
          "type": "boolean"
        },
        "entrypoint": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "exec": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "AppconfigFile": {
      "properties": {
        "guest_path": {
          "type": "string"
        },
        "local_path": {
          "type": "string"
        },
        "processes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "raw_value": {
          "type": "string"
        },
        "secret_name": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "AppconfigHTTPService": {
      "properties": {
        "auto_start_machines": {
          "type": [
            "null",
            "boolean"
          ]
        },
        "auto_stop_machines": {
          "type": [
            "null",
            "boolean"
          ]
        },
        "checks": {
          "items": {
            "$ref": "#/definitions/AppconfigServiceHTTPCheck"
          },
          "type": "array"
        },
        "concurrency": {
          "$ref": "#/definitions/ApiMachineServiceConcurrency"
        },
        "force_https": {
          "type": "boolean"
        },
        "http_options": {
          "$ref": "#/definitions/ApiHTTPOptions"
        },
        "internal_port": {
          "type": "integer"
        },
        "min_machines_running": {
          "type": [
            "null",
            "integer"
          ]
        },
        "processes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "tls_options": {
          "$ref": "#/definitions/ApiTLSOptions"
        }
      },
      "type": "object"
    },
    "AppconfigMetrics": {
      "properties": {
        "path": {
          "type": "string"
        },
        "port": {
          "type": "integer"
        },
        "processes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "AppconfigMount": {
      "properties": {
        "auto_extend_size_increment": {
          "type": "string"
        },
        "auto_extend_size_limit": {
          "type": "string"
        },
        "auto_extend_size_threshold": {
          "type": "integer"
        },
        "destination": {
          "type": "string"
        },
        "initial_size": {
          "type": "string"
        },
        "processes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "source": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "AppconfigService": {
      "properties": {
        "auto_start_machines": {
          "type": [
            "null",
            "boolean"
          ]
        },
        "auto_stop_machines": {
          "type": [
            "null",
            "boolean"
          ]
        },
        "concurrency": {
          "$ref": "#/definitions/ApiMachineServiceConcurrency"
        },
        "http_checks": {
          "items": {
            "$ref": "#/definitions/AppconfigServiceHTTPCheck"
          },
          "type": "array"
        },
        "internal_port": {
          "type": "integer"
        },
        "min_machines_running": {
          "type": [
            "null",
            "integer"
          ]
        },
        "ports": {
          "items": {
            "$ref": "#/definitions/ApiMachinePort"
          },
          "type": "array"
        },
        "processes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "protocol": {
          "type": "string"
        },
        "tcp_checks": {
          "items": {
            "$ref": "#/definitions/AppconfigServiceTCPCheck"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "AppconfigServiceHTTPCheck": {
      "properties": {
        "grace_period": {
          "$ref": "#/definitions/ApiDuration"
        },
        "headers": {
          "additionalProperties": {
            "type": "string"
          },
          "type": "object"
        },
        "interval": {
          "$ref": "#/definitions/ApiDuration"
        },
        "method": {
          "type": [
            "null",
            "string"
          ]
        },
        "path": {
          "type": [
            "null",
            "string"
          ]
        },
        "protocol": {
          "type": [
            "null",
            "string"
          ]
        },
        "timeout": {
          "$ref": "#/definitions/ApiDuration"
        },
        "tls_server_name": {
          "type": [
            "null",
            "string"
          ]
        },
        "tls_skip_verify": {
          "type": [
            "null",
            "boolean"
          ]
        }
      },
      "type": "object"
    },
    "AppconfigServiceTCPCheck": {
      "properties": {
        "grace_period": {
          "$ref": "#/definitions/ApiDuration"
        },
        "interval": {
          "$ref": "#/definitions/ApiDuration"
        },
        "timeout": {
          "$ref": "#/definitions/ApiDuration"
        }
      },
      "type": "object"
    },
    "AppconfigStatic": {
      "properties": {
        "guest_path": {
          "type": "string"
        },
        "url_prefix": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "AppconfigToplevelCheck": {
      "properties": {
        "grace_period": {
          "$ref": "#/definitions/ApiDuration"
        },
        "headers": {
          "additionalProperties": {
            "type": "string"
          },
          "type": "object"
        },
        "interval": {
          "$ref": "#/definitions/ApiDuration"
        },
        "method": {
          "type": [
            "null",
            "string"
          ]
        },
        "path": {
          "type": [
            "null",
            "string"
          ]
        },
        "port": {
          "type": [
            "null",
            "integer"
          ]
        },
        "processes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "protocol": {
          "type": [
            "null",
            "string"
          ]
        },
        "timeout": {
          "$ref": "#/definitions/ApiDuration"
        },
        "tls_server_name": {
          "type": [
            "null",
            "string"
          ]
        },
        "tls_skip_verify": {
          "type": [
            "null",
            "boolean"
          ]
        },
        "type": {
          "type": [
            "null",
            "string"
          ]
        }
      },
      "type": "object"
    }
  },
  "properties": {
    "app": {
      "type": "string"
    },
    "build": {
      "$ref": "#/definitions/AppconfigBuild"
    },
    "checks": {
      "additionalProperties": {
        "$ref": "#/definitions/AppconfigToplevelCheck"
      },
      "type": "object"
    },
    "console_command": {
      "type": "string"
    },
    "deploy": {
      "$ref": "#/definitions/AppconfigDeploy"
    },
    "env": {
      "additionalProperties": {
        "type": "string"
      },
      "type": "object"
    },
    "experimental": {
      "$ref": "#/definitions/AppconfigExperimental"
    },
    "files": {
      "items": {
        "$ref": "#/definitions/AppconfigFile"
      },
      "type": "array"
    },
    "host_dedication_id": {
      "type": "string"
    },
    "http_service": {
      "$ref": "#/definitions/AppconfigHTTPService"
    },
    "kill_signal": {
      "enum": [
        "SIGINT",
        "SIGTERM",
        "SIGQUIT",
        "SIGUSR1",
        "SIGUSR2",
        "SIGKILL",
        "SIGSTOP"
      ],
      "type": [
        "null",
        "string"
      ]
    },
    "kill_timeout": {
      "$ref": "#/definitions/ApiDuration"
    },
    "metrics": {
      "items": {
        "$ref": "#/definitions/AppconfigMetrics"
      },
      "type": "array"
    },
    "mounts": {
      "items": {
        "$ref": "#/definitions/AppconfigMount"
      },
      "type": "array"
    },
    "primary_region": {
      "type": "string"
    },
    "processes": {
      "additionalProperties": {
        "type": "string"
      },
      "type": "object"
    },
    "services": {
      "items": {
        "$ref": "#/definitions/AppconfigService"
      },
      "type": "array"
    },
    "statics": {
      "items": {
        "$ref": "#/definitions/AppconfigStatic"
      },
      "type": "array"
    },
    "swap_size_mb": {
      "type": [
        "null",
        "integer"
      ]
    },
    "vm": {
      "items": {
        "$ref": "#/definitions/AppconfigCompute"
      },
      "type": "array"
    }
  },
  "type": "object"
}