{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/superfly/flyctl/internal/appconfig/config",
  "$defs": {
    "Build": {
      "properties": {
        "builder": {
          "type": "string"
        },
        "args": {
          "additionalProperties": {
            "type": "string"
          },
          "type": "object"
        },
        "buildpacks": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "image": {
          "type": "string"
        },
        "settings": {
          "type": "object"
        },
        "builtin": {
          "type": "string"
        },
        "dockerfile": {
          "type": "string"
        },
        "ignorefile": {
          "type": "string"
        },
        "build-target": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Compute": {
      "properties": {
        "size": {
          "type": "string",
          "enum": [
            "shared-cpu-1x",
            "shared-cpu-2x",
            "shared-cpu-4x",
            "shared-cpu-8x",
            "performance-1x",
            "performance-2x",
            "performance-4x",
            "performance-8x",
            "performance-16x",
            "a100-40gb",
            "a100-80gb",
            "l40s"
          ]
        },
        "memory": {
          "type": "string"
        },
        "cpu_kind": {
          "type": "string"
        },
        "cpus": {
          "type": "integer"
        },
        "memory_mb": {
          "type": "integer"
        },
        "gpu_kind": {
          "type": "string"
        },
        "host_dedication_id": {
          "type": "string"
        },
        "kernel_args": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "processes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Config": {
      "properties": {
        "app": {
          "type": "string"
        },
        "primary_region": {
          "type": "string"
        },
        "kill_signal": {
          "type": "string",
          "enum": [
            "SIGINT",
            "SIGTERM",
            "SIGQUIT",
            "SIGUSR1",
            "SIGUSR2",
            "SIGKILL",
            "SIGSTOP"
          ]
        },
        "kill_timeout": {
          "$ref": "#/$defs/Duration"
        },
        "swap_size_mb": {
          "type": "integer"
        },
        "console_command": {
          "type": "string"
        },
        "experimental": {
          "$ref": "#/$defs/Experimental"
        },
        "build": {
          "$ref": "#/$defs/Build"
        },
        "deploy": {
          "$ref": "#/$defs/Deploy"
        },
        "env": {
          "additionalProperties": {
            "type": "string"
          },
          "type": "object"
        },
        "processes": {
          "additionalProperties": {
            "type": "string"
          },
          "type": "object"
        },
        "mounts": {
          "items": {
            "$ref": "#/$defs/Mount"
          },
          "type": "array"
        },
        "http_service": {
          "$ref": "#/$defs/HTTPService"
        },
        "services": {
          "items": {
            "$ref": "#/$defs/Service"
          },
          "type": "array"
        },
        "checks": {
          "additionalProperties": {
            "$ref": "#/$defs/ToplevelCheck"
          },
          "type": "object"
        },
        "files": {
          "items": {
            "$ref": "#/$defs/File"
          },
          "type": "array"
        },
        "host_dedication_id": {
          "type": "string"
        },
        "vm": {
          "items": {
            "$ref": "#/$defs/Compute"
          },
          "type": "array"
        },
        "statics": {
          "items": {
            "$ref": "#/$defs/Static"
          },
          "type": "array"
        },
        "metrics": {
          "items": {
            "$ref": "#/$defs/Metrics"
          },
          "type": "array"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Deploy": {
      "properties": {
        "release_command": {
          "type": "string"
        },
        "release_command_timeout": {
          "$ref": "#/$defs/Duration"
        },
        "strategy": {
          "type": "string",
          "enum": [
            "canary",
            "rolling",
            "bluegreen",
            "immediate"
          ]
        },
        "max_unavailable": {
          "type": "number"
        },
        "wait_timeout": {
          "$ref": "#/$defs/Duration"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Duration": {
      "properties": {
        "Duration": {
          "$ref": "#/$defs/Duration"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "Duration"
      ]
    },
    "Experimental": {
      "properties": {
        "cmd": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "entrypoint": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "exec": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "auto_rollback": {
          "type": "boolean"
        },
        "enable_consul": {
          "type": "boolean"
        },
        "enable_etcd": {
          "type": "boolean"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "File": {
      "properties": {
        "guest_path": {
          "type": "string"
        },
        "local_path": {
          "type": "string"
        },
        "secret_name": {
          "type": "string"
        },
        "raw_value": {
          "type": "string"
        },
        "processes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "HTTPOptions": {
      "properties": {
        "compress": {
          "type": "boolean"
        },
        "response": {
          "$ref": "#/$defs/HTTPResponseOptions"
        },
        "h2_backend": {
          "type": "boolean"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "HTTPResponseOptions": {
      "properties": {
        "headers": {
          "type": "object"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "HTTPService": {
      "properties": {
        "internal_port": {
          "type": "integer"
        },
        "force_https": {
          "type": "boolean"
        },
        "auto_stop_machines": {
          "type": "boolean"
        },
        "auto_start_machines": {
          "type": "boolean"
        },
        "min_machines_running": {
          "type": "integer"
        },
        "processes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "concurrency": {
          "$ref": "#/$defs/MachineServiceConcurrency"
        },
        "tls_options": {
          "$ref": "#/$defs/TLSOptions"
        },
        "http_options": {
          "$ref": "#/$defs/HTTPOptions"
        },
        "checks": {
          "items": {
            "$ref": "#/$defs/ServiceHTTPCheck"
          },
          "type": "array"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "MachinePort": {
      "properties": {
        "port": {
          "type": "integer"
        },
        "start_port": {
          "type": "integer"
        },
        "end_port": {
          "type": "integer"
        },
        "handlers": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "force_https": {
          "type": "boolean"
        },
        "tls_options": {
          "$ref": "#/$defs/TLSOptions"
        },
        "http_options": {
          "$ref": "#/$defs/HTTPOptions"
        },
        "proxy_proto_options": {
          "$ref": "#/$defs/ProxyProtoOptions"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "MachineServiceConcurrency": {
      "properties": {
        "type": {
          "type": "string"
        },
        "hard_limit": {
          "type": "integer"
        },
        "soft_limit": {
          "type": "integer"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Metrics": {
      "properties": {
        "port": {
          "type": "integer"
        },
        "path": {
          "type": "string"
        },
        "processes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Mount": {
      "properties": {
        "source": {
          "type": "string"
        },
        "destination": {
          "type": "string"
        },
        "initial_size": {
          "type": "string"
        },
        "processes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "auto_extend_size_threshold": {
          "type": "integer"
        },
        "auto_extend_size_increment": {
          "type": "string"
        },
        "auto_extend_size_limit": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "ProxyProtoOptions": {
      "properties": {
        "version": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Service": {
      "properties": {
        "protocol": {
          "type": "string"
        },
        "internal_port": {
          "type": "integer"
        },
        "auto_stop_machines": {
          "type": "boolean"
        },
        "auto_start_machines": {
          "type": "boolean"
        },
        "min_machines_running": {
          "type": "integer"
        },
        "ports": {
          "items": {
            "$ref": "#/$defs/MachinePort"
          },
          "type": "array"
        },
        "concurrency": {
          "$ref": "#/$defs/MachineServiceConcurrency"
        },
        "tcp_checks": {
          "items": {
            "$ref": "#/$defs/ServiceTCPCheck"
          },
          "type": "array"
        },
        "http_checks": {
          "items": {
            "$ref": "#/$defs/ServiceHTTPCheck"
          },
          "type": "array"
        },
        "processes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "ServiceHTTPCheck": {
      "properties": {
        "interval": {
          "$ref": "#/$defs/Duration"
        },
        "timeout": {
          "$ref": "#/$defs/Duration"
        },
        "grace_period": {
          "$ref": "#/$defs/Duration"
        },
        "method": {
          "type": "string"
        },
        "path": {
          "type": "string"
        },
        "protocol": {
          "type": "string"
        },
        "tls_skip_verify": {
          "type": "boolean"
        },
        "tls_server_name": {
          "type": "string"
        },
        "headers": {
          "additionalProperties": {
            "type": "string"
          },
          "type": "object"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "ServiceTCPCheck": {
      "properties": {
        "interval": {
          "$ref": "#/$defs/Duration"
        },
        "timeout": {
          "$ref": "#/$defs/Duration"
        },
        "grace_period": {
          "$ref": "#/$defs/Duration"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Static": {
      "properties": {
        "guest_path": {
          "type": "string"
        },
        "url_prefix": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "TLSOptions": {
      "properties": {
        "alpn": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "versions": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "default_self_signed": {
          "type": "boolean"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "ToplevelCheck": {
      "properties": {
        "port": {
          "type": "integer"
        },
        "type": {
          "type": "string"
        },
        "interval": {
          "$ref": "#/$defs/Duration"
        },
        "timeout": {
          "$ref": "#/$defs/Duration"
        },
        "grace_period": {
          "$ref": "#/$defs/Duration"
        },
        "method": {
          "type": "string"
        },
        "path": {
          "type": "string"
        },
        "protocol": {
          "type": "string"
        },
        "tls_skip_verify": {
          "type": "boolean"
        },
        "tls_server_name": {
          "type": "string"
        },
        "headers": {
          "additionalProperties": {
            "type": "string"
          },
          "type": "object"
        },
        "processes": {
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "additionalProperties": false,
      "type": "object"
    }
  }
}